<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>YouTube to Blog Converter - AI-Powered Content Transformation | Bolt.new Hackathon</title>
    <meta name="description" content="Transform any YouTube video into professionally formatted blog posts using advanced AI technology. Built during Bolt.new's world's largest hackathon. Free, fast, and easy to use.">
    <meta name="keywords" content="YouTube to blog, AI content creation, video transcription, blog generator, content marketing, Bolt.new hackathon, video to text">
    <meta name="author" content="Bolt.new Hackathon Team">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://yourdomain.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com">
    <meta property="og:title" content="YouTube to Blog Converter - AI-Powered Content Transformation">
    <meta property="og:description" content="Transform any YouTube video into professionally formatted blog posts using advanced AI technology. Built during Bolt.new's world's largest hackathon.">
    <meta property="og:image" content="https://yourdomain.com/public/android-chrome-512x512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:site_name" content="YT2Blog">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:url" content="https://yourdomain.com">
    <meta property="twitter:title" content="YouTube to Blog Converter - AI-Powered Content Transformation">
    <meta property="twitter:description" content="Transform any YouTube video into professionally formatted blog posts using advanced AI technology. Built during Bolt.new's world's largest hackathon.">
    <meta property="twitter:image" content="https://yourdomain.com/public/android-chrome-512x512.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="public/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="public/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="public/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="public/apple-touch-icon.png">
    <link rel="manifest" href="public/site.webmanifest">
    
    <!-- Android Chrome Icons -->
    <meta name="theme-color" content="#3B82F6">
    <meta name="msapplication-TileColor" content="#3B82F6">
    
    <!-- TailwindCSS with JIT Engine for Custom Classes -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
    <script>
        // Configure Tailwind for production-like performance
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#6366F1'
                    }
                }
            },
            corePlugins: {
                preflight: true,
            }
        }
    </script>
    <link rel="preload" href="https://unpkg.com/lucide@latest/dist/umd/lucide.js" as="script">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Animations -->
    <style>
        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(-20px);
                opacity: 0;
            }
        }
        
        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        .animate-gentle-bounce {
            animation: gentle-bounce 3s ease-in-out infinite;
        }
    </style>
    
    <!-- Suppress TailwindCSS development warnings in production -->
    <script>
        if (window.location.hostname !== 'localhost') {
            // Suppress console warnings for production
            const originalConsoleWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com should not be used in production')) {
                    return;
                }
                originalConsoleWarn.apply(console, args);
            };
        }
    </script>
    
    <style>
        /* Performance optimization - preload critical styles */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
    </style>
  </head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <div class="relative">
                        <div class="absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg blur opacity-70"></div>
                        <div class="relative bg-gradient-to-r from-red-500 to-orange-500 p-2 rounded-lg">
                            <i data-lucide="youtube" class="h-6 w-6 text-white"></i>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent">
                            YT2Blog
                        </h1>
                        <i data-lucide="file-text" class="h-5 w-5 text-gray-600"></i>
                    </div>
                </div>
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="#converter" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">Converter</a>
                    <a href="#templates" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">Templates</a>
                    <a href="#about" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">About</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">
                <span class="bg-gradient-to-r from-blue-600 via-purple-600 to-orange-600 bg-clip-text text-transparent">
                    Transform YouTube Videos
                </span>
                <br>
                <span class="text-gray-900">into Engaging Blogs</span>
            </h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Convert any YouTube video into a well-structured blog post with multiple template options. 
                Perfect for content creators, marketers, and bloggers.
            </p>
        </div>

        <!-- URL Input Section -->
        <div class="mb-8" id="converter">
            <div class="w-full max-w-2xl mx-auto">
                <form id="urlForm" class="space-y-4">
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <i data-lucide="link" class="h-5 w-5 text-gray-400"></i>
                        </div>
                        <input
                            type="url"
                            id="urlInput"
                            placeholder="Paste your YouTube video URL here..."
                            class="block w-full pl-12 pr-12 py-4 text-lg border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200"
                        />
                        <div class="absolute inset-y-0 right-0 pr-4 flex items-center">
                            <i id="validationIcon" class="h-5 w-5 hidden"></i>
                        </div>
                    </div>
                    
                    <div id="urlError" class="text-red-600 text-sm hidden flex items-center space-x-1">
                        <i data-lucide="alert-circle" class="h-4 w-4"></i>
                        <span>Please enter a valid YouTube URL</span>
                    </div>

                    <button
                        type="submit"
                        id="convertBtn"
                        class="w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 transform bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]"
                    >
                        Convert to Blog
                    </button>
                </form>

                <div class="mt-6 text-center">
                    <p class="text-gray-600 text-sm">
                        Supported formats: youtube.com/watch, youtube, youtube.com/embed
                    </p>
                </div>
            </div>
        </div>

        <!-- Enhanced Loading Section -->
        <div id="loadingSection" class="hidden mb-8">
            <div class="bg-white rounded-2xl shadow-lg p-8 border border-gray-200 fade-in">
                <!-- Progress Header -->
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Converting Your Video</h3>
                    <p class="text-gray-600">Please wait while we process your YouTube video into a blog post</p>
                </div>

                <!-- Progress Steps -->
                <div class="space-y-6 mb-8">
                    <!-- Step 1: Video Analysis -->
                    <div id="step1" class="progress-step flex items-center space-x-4 p-4 rounded-lg bg-blue-50 border border-blue-200">
                        <div class="step-icon w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center">
                            <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-blue-900">Analyzing Video</h4>
                            <p class="text-sm text-blue-700">Extracting video metadata and information...</p>
                        </div>
                        <div class="step-status">
                            <div class="w-6 h-6 rounded-full border-2 border-blue-300 animate-pulse"></div>
                        </div>
                    </div>

                    <!-- Step 2: Transcript Extraction -->
                    <div id="step2" class="progress-step flex items-center space-x-4 p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <div class="step-icon w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center">
                            <i data-lucide="file-text" class="h-5 w-5 text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-600">Getting Transcript</h4>
                            <p class="text-sm text-gray-500">Extracting video transcript and content...</p>
                        </div>
                        <div class="step-status">
                            <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                        </div>
                    </div>

                    <!-- Step 3: AI Generation -->
                    <div id="step3" class="progress-step flex items-center space-x-4 p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <div class="step-icon w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center">
                            <i data-lucide="brain" class="h-5 w-5 text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-600">Generating Blog Content</h4>
                            <p class="text-sm text-gray-500">AI is creating your blog post...</p>
                        </div>
                        <div class="step-status">
                            <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>Progress</span>
                        <span id="progressPercentage">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Time Estimation -->
                <div class="text-center">
                    <p class="text-sm text-gray-600">
                        <i data-lucide="clock" class="h-4 w-4 inline mr-1"></i>
                        Estimated time remaining: <span id="timeRemaining" class="font-medium">15-20 seconds</span>
                    </p>
                </div>

                <!-- Fun Facts During Loading -->
                <div class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-100">
                    <h5 class="font-semibold text-gray-800 mb-2">💡 Did you know?</h5>
                    <p id="loadingFact" class="text-sm text-gray-700">
                        YouTube processes over 500 hours of video uploaded every minute!
                    </p>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden space-y-8">
            <!-- Video Preview -->
            <div id="videoPreview" class="bg-white rounded-2xl shadow-lg p-6 border border-gray-200 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Video Preview</h3>
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-1/3">
                        <div class="relative rounded-lg overflow-hidden">
                            <img id="videoThumbnail" src="" alt="" class="w-full h-48 object-cover">
                            <div id="videoDuration" class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded"></div>
                        </div>
                    </div>
                    <div class="md:w-2/3 space-y-4">
                        <h4 id="videoTitle" class="text-xl font-bold text-gray-900"></h4>
                        <div class="flex flex-wrap gap-4 text-sm text-gray-600">
                            <div class="flex items-center space-x-1">
                                <i data-lucide="user" class="h-4 w-4"></i>
                                <span id="channelName"></span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <i data-lucide="eye" class="h-4 w-4"></i>
                                <span id="videoViews"></span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <i data-lucide="calendar" class="h-4 w-4"></i>
                                <span id="publishedDate"></span>
                            </div>
                        </div>
                        <p id="videoDescription" class="text-gray-700 text-sm"></p>
                    </div>
                </div>
            </div>

            <!-- Template Selector -->
            <div id="templateSelector" class="bg-white rounded-2xl shadow-lg p-6 border border-gray-200 fade-in" id="templates">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Choose Blog Template</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button class="template-btn relative p-4 rounded-xl border-2 border-blue-500 bg-blue-100 hover:bg-blue-200 transition-all duration-200 hover:scale-105" data-template="article">
                        <div class="flex flex-col items-center space-y-2">
                            <i data-lucide="file-text" class="h-8 w-8 text-blue-600"></i>
                            <span class="font-medium text-blue-900">Article</span>
                            <span class="text-xs text-gray-600 text-center">Standard blog article format</span>
                        </div>
                        <div class="template-loader absolute inset-0 bg-blue-100 bg-opacity-90 rounded-xl hidden flex items-center justify-center">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
                        </div>
                    </button>
                    <button class="template-btn relative p-4 rounded-xl border-2 border-gray-200 bg-gray-50 hover:bg-green-100 transition-all duration-200 hover:scale-105" data-template="tutorial">
                        <div class="flex flex-col items-center space-y-2">
                            <i data-lucide="book-open" class="h-8 w-8 text-green-600"></i>
                            <span class="font-medium text-green-900">Tutorial</span>
                            <span class="text-xs text-gray-600 text-center">Step-by-step guide format</span>
                        </div>
                        <div class="template-loader absolute inset-0 bg-green-100 bg-opacity-90 rounded-xl hidden flex items-center justify-center">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"></div>
                        </div>
                    </button>
                    <button class="template-btn relative p-4 rounded-xl border-2 border-gray-200 bg-gray-50 hover:bg-yellow-100 transition-all duration-200 hover:scale-105" data-template="review">
                        <div class="flex flex-col items-center space-y-2">
                            <i data-lucide="star" class="h-8 w-8 text-yellow-600"></i>
                            <span class="font-medium text-yellow-900">Review</span>
                            <span class="text-xs text-gray-600 text-center">Product or content review</span>
                        </div>
                        <div class="template-loader absolute inset-0 bg-yellow-100 bg-opacity-90 rounded-xl hidden flex items-center justify-center">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"></div>
                        </div>
                    </button>
                    <button class="template-btn relative p-4 rounded-xl border-2 border-gray-200 bg-gray-50 hover:bg-purple-100 transition-all duration-200 hover:scale-105" data-template="summary">
                        <div class="flex flex-col items-center space-y-2">
                            <i data-lucide="list" class="h-8 w-8 text-purple-600"></i>
                            <span class="font-medium text-purple-900">Summary</span>
                            <span class="text-xs text-gray-600 text-center">Quick summary format</span>
                        </div>
                        <div class="template-loader absolute inset-0 bg-purple-100 bg-opacity-90 rounded-xl hidden flex items-center justify-center">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"></div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Blog Preview -->
            <div id="blogPreview" class="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden fade-in">
                <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900">
                            Blog Preview (<span id="selectedTemplate">Article</span>)
                        </h3>
                        <div class="flex space-x-2">
                            <button id="copyBtn" class="inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium bg-blue-100 text-blue-700 border border-blue-200 hover:bg-blue-200 transition-all duration-200">
                                <i data-lucide="copy" class="h-4 w-4 mr-2"></i>
                                Copy
                            </button>
                            <button id="downloadBtn" class="inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium bg-orange-100 text-orange-700 border border-orange-200 hover:bg-orange-200 transition-all duration-200">
                                <i data-lucide="download" class="h-4 w-4 mr-2"></i>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Blog Content Container -->
                <div class="relative min-h-96">
                    <!-- Template Loading Indicator -->
                    <div id="templateLoadingIndicator" class="absolute inset-0 bg-white bg-opacity-95 flex flex-col items-center justify-center z-10 hidden">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                            <span class="text-blue-600 font-medium">Generating new template content...</span>
                        </div>
                        <div class="text-sm text-gray-500">This may take 10-15 seconds</div>
                    </div>
                    
                    <!-- Skeleton Loading for Progressive Content -->
                    <div id="contentSkeleton" class="p-6 hidden">
                        <div class="animate-pulse space-y-4">
                            <div class="h-6 bg-gray-200 rounded w-3/4"></div>
                            <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                            <div class="space-y-2">
                                <div class="h-4 bg-gray-200 rounded"></div>
                                <div class="h-4 bg-gray-200 rounded w-5/6"></div>
                                <div class="h-4 bg-gray-200 rounded w-4/5"></div>
                            </div>
                            <div class="h-6 bg-gray-200 rounded w-2/3"></div>
                            <div class="space-y-2">
                                <div class="h-4 bg-gray-200 rounded"></div>
                                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                                <div class="h-4 bg-gray-200 rounded w-5/6"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Actual Content -->
                    <div id="blogContent" class="p-6 max-h-96 overflow-y-auto prose prose-sm max-w-none"></div>
                    
                    <!-- Feedback Prompt (appears after blog generation) -->
                    <div id="feedbackPrompt" class="hidden p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-t border-blue-200">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="flex -space-x-1">
                                    <span class="text-2xl">⭐</span>
                                    <span class="text-2xl">⭐</span>
                                    <span class="text-2xl">⭐</span>
                                    <span class="text-2xl">⭐</span>
                                    <span class="text-2xl">⭐</span>
                                </div>
                                <div>
                                    <p class="text-sm font-semibold text-gray-900">Love YT2Blog? Share your feedback!</p>
                                    <p class="text-xs text-gray-600">Help us improve by sharing your experience</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <a href="mailto:kartikag119@gmail.com?subject=YT2Blog%20Feedback&body=Hi!%20I%20just%20used%20YT2Blog%20and%20wanted%20to%20share%20my%20feedback:%0A%0A[Please%20share%20your%20thoughts%2C%20suggestions%2C%20or%20issues%20here]%0A%0AThanks%20for%20creating%20this%20awesome%20tool!" 
                                   class="inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-md">
                                    <i data-lucide="heart" class="h-4 w-4 mr-2"></i>
                                    Send Feedback
                                </a>
                                <button onclick="hideFeedbackPrompt()" 
                                        class="p-2 text-gray-400 hover:text-gray-600 transition-colors">
                                    <i data-lucide="x" class="h-4 w-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div id="featuresSection" class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="text-center p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">🎥</span>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Easy Conversion</h3>
                <p class="text-gray-600">Simply paste any YouTube URL and get a professionally formatted blog post in seconds.</p>
            </div>

            <div class="text-center p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">📝</span>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Multiple Templates</h3>
                <p class="text-gray-600">Choose from article, tutorial, review, or summary formats to match your content needs.</p>
            </div>

            <div class="text-center p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">📋</span>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Copy & Download</h3>
                <p class="text-gray-600">Copy to clipboard or download as markdown file for easy publishing on any platform.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16" id="about">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Main Footer Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-8">
                <!-- Brand Section -->
                <div class="md:col-span-2">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="relative">
                            <div class="absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg blur opacity-70"></div>
                            <div class="relative bg-gradient-to-r from-red-500 to-orange-500 p-2 rounded-lg">
                                <i data-lucide="youtube" class="h-6 w-6 text-white"></i>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent">
                            YT2Blog
                        </h3>
                    </div>
                    <p class="text-gray-400 text-lg mb-4">
                        Transform any YouTube video into professionally formatted blog posts using advanced AI technology.
                    </p>
                    <div class="flex items-center space-x-2 text-sm text-gray-500">
                        <i data-lucide="award" class="h-4 w-4"></i>
                        <span>Built during Bolt.new's World's Largest Hackathon 🏆</span>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Features</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-center space-x-2">
                            <i data-lucide="check" class="h-4 w-4 text-green-500"></i>
                            <span>AI-Powered Generation</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <i data-lucide="check" class="h-4 w-4 text-green-500"></i>
                            <span>Multiple Templates</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <i data-lucide="check" class="h-4 w-4 text-green-500"></i>
                            <span>Progressive Loading</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <i data-lucide="check" class="h-4 w-4 text-green-500"></i>
                            <span>Smart Caching</span>
                        </li>
                    </ul>
                </div>

                <!-- Support & Links -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Connect</h4>
                    <div class="space-y-3">
                        <a href="mailto:kartikag119@gmail.com" 
                           class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="mail" class="h-4 w-4"></i>
                            <span>Contact Us</span>
                        </a>
                        <a href="https://github.com/kartikey2001/YTBlogs" target="_blank" rel="noopener noreferrer"
                           class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="github" class="h-4 w-4"></i>
                            <span>GitHub Repository</span>
                        </a>
                        </a>
                        <a href="#converter" class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="arrow-up" class="h-4 w-4"></i>
                            <span>Back to Top</span>
                        </a>
                    </div>
                </div>

                <!-- Resources & Help -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Resources</h4>
                    <div class="space-y-3">
                        <a href="https://youtu.be/T6sJ4HknTPQ" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="play-circle" class="h-4 w-4"></i>
                            <span>How to Use</span>
                        </a>
                        <a href="https://www.youtube.com/yt/about/" target="_blank" rel="noopener noreferrer"
                           class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="info" class="h-4 w-4"></i>
                            <span>YouTube API</span>
                        </a>
                        <a href="https://studio.nebius.ai/" target="_blank" rel="noopener noreferrer"
                           class="flex items-center space-x-2 text-gray-400 hover:text-white transition-colors">
                            <i data-lucide="cpu" class="h-4 w-4"></i>
                            <span>Nebius AI Studio</span>
                        </a>
                        <div class="flex items-center space-x-2 text-gray-400">
                            <i data-lucide="shield-check" class="h-4 w-4 text-green-500"></i>
                            <span>Privacy First</span>
                        </div>
                    </div>
                </div>

                <!-- Legal & Support -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Support</h4>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-2 text-gray-400">
                            <i data-lucide="clock" class="h-4 w-4"></i>
                            <span>24/7 Available</span>
                        </div>
                        <div class="flex items-center space-x-2 text-gray-400">
                            <i data-lucide="zap" class="h-4 w-4 text-yellow-500"></i>
                            <span>Fast Processing</span>
                        </div>
                        <div class="flex items-center space-x-2 text-gray-400">
                            <i data-lucide="download" class="h-4 w-4"></i>
                            <span>Free Downloads</span>
                        </div>
                        <a href="mailto:kartikag119@gmail.com?subject=YT2Blog%20Feedback&body=Hi!%20I%20just%20used%20YT2Blog%20and%20wanted%20to%20share%20my%20feedback:%0A%0A[Please%20share%20your%20thoughts%2C%20suggestions%2C%20or%20issues%20here]%0A%0AThanks%20for%20creating%20this%20awesome%20tool!" 
                           class="group relative flex items-center space-x-2 p-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
                            <i data-lucide="message-circle" class="h-5 w-5 animate-pulse"></i>
                            <span class="font-semibold">💬 Send Feedback</span>
                            <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"></div>
                            <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></div>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Bottom Footer -->
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
                    <!-- Copyright -->
                    <div class="text-gray-400 text-sm">
                        © 2024 YT2Blog. Built with ❤️ using 
                        <a href="https://bolt.new" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 transition-colors">
                            Bolt.new
                        </a>
                    </div>

                    <!-- Tech Stack -->
                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                        <span class="flex items-center space-x-1">
                            <i data-lucide="code" class="h-4 w-4"></i>
                            <span>FastAPI</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i data-lucide="palette" class="h-4 w-4"></i>
                            <span>Tailwind CSS</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i data-lucide="brain" class="h-4 w-4"></i>
                            <span>Nebius AI</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating Feedback Button -->
    <div class="fixed bottom-6 right-6 z-50">
        <a href="mailto:kartikag119@gmail.com?subject=YT2Blog%20Feedback&body=Hi!%20I%20just%20used%20YT2Blog%20and%20wanted%20to%20share%20my%20feedback:%0A%0A[Please%20share%20your%20thoughts%2C%20suggestions%2C%20or%20issues%20here]%0A%0AThanks%20for%20creating%20this%20awesome%20tool!" 
           class="group relative flex items-center justify-center w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-110 animate-gentle-bounce">
            <i data-lucide="message-circle" class="h-6 w-6"></i>
            
            <!-- Tooltip -->
            <div class="absolute right-16 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-all duration-300 whitespace-nowrap pointer-events-none">
                💬 Share Your Feedback!
                <div class="absolute top-1/2 -right-2 transform -translate-y-1/2 w-0 h-0 border-l-8 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"></div>
            </div>
            
            <!-- Notification Dot -->
            <div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse flex items-center justify-center">
                <span class="text-xs font-bold">!</span>
            </div>
        </a>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Analytics & Error Tracking
        function trackEvent(eventName, properties = {}) {
            // Replace with your analytics service (Google Analytics, Plausible, etc.)
            console.log('📊 Event:', eventName, properties);
            
            // Example: Google Analytics 4
            // gtag('event', eventName, properties);
            
            // Example: Plausible Analytics
            // plausible(eventName, { props: properties });
        }

        function trackError(error, context = '') {
            console.error('❌ Error tracked:', error, context);
            trackEvent('error_occurred', {
                error_message: error.message || error,
                error_context: context,
                timestamp: new Date().toISOString()
            });
        }

        // Track page load
        window.addEventListener('load', () => {
            trackEvent('page_loaded', {
                user_agent: navigator.userAgent,
                timestamp: new Date().toISOString()
            });
        });

        // API Configuration
        const API_BASE_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:8000' 
            : 'https://ytblogs-production.up.railway.app';

        // State management
        let currentVideoData = null;
        let currentTemplate = 'article';
        let currentBlogContent = '';
        let templateCache = {}; // Cache for generated content by template
        let isGenerating = false; // Prevent multiple simultaneous generations
        let loadingTimer = null; // Timer for progress animation

        // DOM elements
        const urlForm = document.getElementById('urlForm');
        const urlInput = document.getElementById('urlInput');
        const validationIcon = document.getElementById('validationIcon');
        const urlError = document.getElementById('urlError');
        const convertBtn = document.getElementById('convertBtn');
        const loadingSection = document.getElementById('loadingSection');
        const resultsSection = document.getElementById('resultsSection');
        const featuresSection = document.getElementById('featuresSection');
        const templateLoadingIndicator = document.getElementById('templateLoadingIndicator');
        const contentSkeleton = document.getElementById('contentSkeleton');
        const blogContent = document.getElementById('blogContent');

        // Progress elements
        const progressBar = document.getElementById('progressBar');
        const progressPercentage = document.getElementById('progressPercentage');
        const timeRemaining = document.getElementById('timeRemaining');
        const loadingFact = document.getElementById('loadingFact');

        // Fun facts for loading
        const loadingFacts = [
            "YouTube processes over 500 hours of video uploaded every minute!",
            "The first YouTube video was uploaded on April 23, 2005 by co-founder Jawed Karim.",
            "Over 2 billion people use YouTube monthly - that's almost one-third of the internet!",
            "YouTube is available in more than 100 countries and 80 languages.",
            "People watch over 1 billion hours of YouTube videos every day!",
            "AI can analyze speech patterns to understand content 10x faster than humans.",
            "Modern language models can process thousands of words per second.",
            "This tool uses advanced AI to transform video content into structured text."
        ];

        // Progress Animation Functions
        function updateProgressStep(stepNumber, status = 'active') {
            const step = document.getElementById(`step${stepNumber}`);
            const stepIcon = step.querySelector('.step-icon');
            const stepStatus = step.querySelector('.step-status div');
            
            // Reset all steps to inactive first if this is step 1
            if (stepNumber === 1) {
                for (let i = 1; i <= 3; i++) {
                    const s = document.getElementById(`step${i}`);
                    s.className = 'progress-step flex items-center space-x-4 p-4 rounded-lg bg-gray-50 border border-gray-200';
                    const icon = s.querySelector('.step-icon');
                    icon.className = 'step-icon w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center';
                    const statusDiv = s.querySelector('.step-status div');
                    statusDiv.className = 'w-6 h-6 rounded-full border-2 border-gray-300';
                }
            }
            
            if (status === 'active') {
                // Make step active (blue, spinning)
                step.className = 'progress-step flex items-center space-x-4 p-4 rounded-lg bg-blue-50 border border-blue-200';
                stepIcon.className = 'step-icon w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center';
                stepIcon.innerHTML = '<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>';
                stepStatus.className = 'w-6 h-6 rounded-full border-2 border-blue-300 animate-pulse';
                
                // Update step text color
                const title = step.querySelector('h4');
                const desc = step.querySelector('p');
                title.className = 'font-semibold text-blue-900';
                desc.className = 'text-sm text-blue-700';
                
            } else if (status === 'completed') {
                // Make step completed (green, checkmark)
                step.className = 'progress-step flex items-center space-x-4 p-4 rounded-lg bg-green-50 border border-green-200';
                stepIcon.className = 'step-icon w-10 h-10 rounded-full bg-green-600 flex items-center justify-center';
                stepIcon.innerHTML = '<i data-lucide="check" class="h-5 w-5 text-white"></i>';
                stepStatus.className = 'w-6 h-6 rounded-full bg-green-600 flex items-center justify-center';
                stepStatus.innerHTML = '<i data-lucide="check" class="h-3 w-3 text-white"></i>';
                
                // Update step text color
                const title = step.querySelector('h4');
                const desc = step.querySelector('p');
                title.className = 'font-semibold text-green-900';
                desc.className = 'text-sm text-green-700';
                
                // Refresh lucide icons
                lucide.createIcons();
            }
        }

        function updateProgress(percentage, timeLeft = null) {
            progressBar.style.width = percentage + '%';
            progressPercentage.textContent = Math.round(percentage) + '%';
            
            if (timeLeft) {
                timeRemaining.textContent = timeLeft;
            }
        }

        function showRandomFact() {
            const randomFact = loadingFacts[Math.floor(Math.random() * loadingFacts.length)];
            loadingFact.textContent = randomFact;
        }

        function startProgressAnimation() {
            let progress = 0;
            let step = 1;
            let startTime = Date.now();
            
            // Show random fact
            showRandomFact();
            
            // Update progress every 500ms
            loadingTimer = setInterval(() => {
                const elapsed = Date.now() - startTime;
                
                // Step 1: Analyzing Video (0-30%, 0-3 seconds)
                if (elapsed < 3000) {
                    updateProgressStep(1, 'active');
                    progress = Math.min(30, (elapsed / 3000) * 30);
                    updateProgress(progress, '12-15 seconds');
                }
                // Step 2: Getting Transcript (30-60%, 3-8 seconds)
                else if (elapsed < 8000) {
                    if (step === 1) {
                        updateProgressStep(1, 'completed');
                        updateProgressStep(2, 'active');
                        step = 2;
                    }
                    progress = 30 + Math.min(30, ((elapsed - 3000) / 5000) * 30);
                    updateProgress(progress, Math.max(0, 15 - Math.floor(elapsed / 1000)) + ' seconds');
                }
                // Step 3: Generating Blog (60-95%, 8+ seconds)
                else {
                    if (step === 2) {
                        updateProgressStep(2, 'completed');
                        updateProgressStep(3, 'active');
                        step = 3;
                        showRandomFact(); // Show another fact for the longest step
                    }
                    progress = 60 + Math.min(35, ((elapsed - 8000) / 7000) * 35);
                    updateProgress(progress, Math.max(0, 15 - Math.floor(elapsed / 1000)) + ' seconds');
                }
                
                // Change fact every 6 seconds
                if (elapsed % 6000 < 500) {
                    showRandomFact();
                }
                
            }, 500);
        }

        function stopProgressAnimation() {
            if (loadingTimer) {
                clearInterval(loadingTimer);
                loadingTimer = null;
            }
            
            // Complete all steps
            updateProgressStep(3, 'completed');
            updateProgress(100, '0 seconds');
        }

        // YouTube URL validation
        function validateYouTubeURL(url) {
            const patterns = [
                /^https?:\/\/(www\.)?youtube\.com\/watch\?v=[\w-]+/,
                /^https?:\/\/youtu\.be\/[\w-]+/,
                /^https?:\/\/(www\.)?youtube\.com\/embed\/[\w-]+/
            ];
            return patterns.some(pattern => pattern.test(url));
        }

        // Update validation UI
        function updateValidation(isValid) {
            const iconElement = validationIcon;
            const errorElement = urlError;
            
            if (isValid === null) {
                iconElement.className = 'h-5 w-5 hidden';
                errorElement.classList.add('hidden');
                convertBtn.disabled = true;
                convertBtn.className = 'w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 bg-gray-300 text-gray-500 cursor-not-allowed';
            } else if (isValid) {
                iconElement.className = 'h-5 w-5 text-green-500';
                iconElement.setAttribute('data-lucide', 'check-circle-2');
                errorElement.classList.add('hidden');
                convertBtn.disabled = false;
                convertBtn.className = 'w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 transform bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]';
            } else {
                iconElement.className = 'h-5 w-5 text-red-500';
                iconElement.setAttribute('data-lucide', 'alert-circle');
                errorElement.classList.remove('hidden');
                convertBtn.disabled = true;
                convertBtn.className = 'w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 bg-gray-300 text-gray-500 cursor-not-allowed';
            }
            
            lucide.createIcons();
        }

        // URL input validation
        urlInput.addEventListener('input', (e) => {
            const url = e.target.value;
            if (url.length === 0) {
                updateValidation(null);
            } else {
                updateValidation(validateYouTubeURL(url));
            }
        });

        // Form submission
        urlForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const url = urlInput.value;
            
            if (!validateYouTubeURL(url)) return;
            
            // Disable convert button and show loading state
            convertBtn.disabled = true;
            const originalButtonText = convertBtn.innerHTML;
            convertBtn.innerHTML = '<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white inline mr-2"></div>Converting...';
            convertBtn.className = 'w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 bg-gray-500 text-white cursor-not-allowed';
            
            try {
                // Track conversion start
                trackEvent('conversion_started', {
                    url_length: url.length,
                    url_type: url.includes('youtu.be') ? 'short' : 'long'
                });
                
                await processVideo(url);
                
                // Track successful conversion
                trackEvent('conversion_completed', {
                    template: currentTemplate,
                    content_length: currentBlogContent.length
                });
            } catch (error) {
                // Track conversion error
                trackError(error, 'video_conversion');
            } finally {
                // Re-enable convert button
                convertBtn.disabled = false;
                convertBtn.innerHTML = originalButtonText;
                convertBtn.className = 'w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 transform bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]';
            }
        });

        // Process video
        async function processVideo(url) {
            try {
                // Show loading with progress animation
                loadingSection.classList.remove('hidden');
                resultsSection.classList.add('hidden');
                featuresSection.classList.add('hidden');
                
                // Start progress animation
                startProgressAnimation();
                
                // Get video info (simulates step 1 & 2)
                const videoResponse = await fetch(`${API_BASE_URL}/api/video-info`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url, template: currentTemplate })
                });
                
                if (!videoResponse.ok) {
                    throw new Error('Failed to fetch video information');
                }
                
                currentVideoData = await videoResponse.json();
                console.log('✅ Video information retrieved successfully');
                
                // Generate blog content (step 3)
                const blogResponse = await fetch(`${API_BASE_URL}/api/generate-blog`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url, template: currentTemplate })
                });
                
                if (!blogResponse.ok) {
                    throw new Error('Failed to generate blog content');
                }
                
                const blogData = await blogResponse.json();
                currentBlogContent = blogData.content;
                console.log('✅ Blog content generated successfully');
                
                // Complete progress animation
                stopProgressAnimation();
                
                // Wait a moment for visual effect
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Update UI
                updateVideoPreview(currentVideoData);
                
                // Cache the content for this template
                templateCache[currentTemplate] = currentBlogContent;
                
                // Hide main loading and show results
                loadingSection.classList.add('hidden');
                resultsSection.classList.remove('hidden');
                
                // Show content with progressive loading
                await updateBlogPreview(currentBlogContent, true);
                
                // Show feedback prompt after successful generation with a slight delay
                setTimeout(() => {
                    const feedbackPrompt = document.getElementById('feedbackPrompt');
                    feedbackPrompt.classList.remove('hidden');
                    feedbackPrompt.style.animation = 'slideIn 0.5s ease-out';
                }, 2000);
                
            } catch (error) {
                console.error('Error processing video:', error);
                
                // Stop progress animation
                stopProgressAnimation();
                
                // Hide loading
                loadingSection.classList.add('hidden');
                
                // Show error message
                alert('Error processing video. Please try again.');
            }
        }

        // Update video preview
        function updateVideoPreview(videoData) {
            document.getElementById('videoThumbnail').src = videoData.thumbnail;
            document.getElementById('videoThumbnail').alt = videoData.title;
            document.getElementById('videoDuration').textContent = videoData.duration;
            document.getElementById('videoTitle').textContent = videoData.title;
            document.getElementById('channelName').textContent = videoData.channel_name;
            document.getElementById('videoViews').textContent = videoData.views + ' views';
            document.getElementById('publishedDate').textContent = videoData.published_at;
            document.getElementById('videoDescription').textContent = videoData.description;
        }

        // Progressive text display function
        function typewriterEffect(element, text, speed = 20) {
            return new Promise((resolve) => {
                element.innerHTML = '';
                let i = 0;
                
                function typeChar() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(typeChar, speed);
                    } else {
                        resolve();
                    }
                }
                
                typeChar();
            });
        }

        // Progressive content streaming simulation
        async function displayContentProgressively(content) {
            const lines = content.split('\n');
            let displayedContent = '';
            
            // Show skeleton initially
            contentSkeleton.classList.remove('hidden');
            blogContent.innerHTML = '';
            
            // Wait a bit to show skeleton effect
            await new Promise(resolve => setTimeout(resolve, 800));
            
            // Hide skeleton and start displaying content
            contentSkeleton.classList.add('hidden');
            
            for (let i = 0; i < lines.length; i++) {
                displayedContent += lines[i] + '\n';
                
                // Parse markdown to HTML for better display
                const formattedContent = formatMarkdownToHTML(displayedContent);
                blogContent.innerHTML = formattedContent;
                
                // Scroll to bottom to show new content
                blogContent.scrollTop = blogContent.scrollHeight;
                
                // Add delay between lines for progressive effect
                const delay = lines[i].length > 100 ? 150 : 80;
                await new Promise(resolve => setTimeout(resolve, delay));
            }
        }

        // Simple markdown to HTML converter
        function formatMarkdownToHTML(markdown) {
            return markdown
                .replace(/^### (.*$)/gim, '<h3 class="text-lg font-semibold text-gray-900 mt-6 mb-3">$1</h3>')
                .replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold text-gray-900 mt-8 mb-4">$1</h2>')
                .replace(/^# (.*$)/gim, '<h1 class="text-2xl font-bold text-gray-900 mt-8 mb-6">$1</h1>')
                .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold text-gray-900">$1</strong>')
                .replace(/\*(.*?)\*/g, '<em class="italic">$1</em>')
                .replace(/^\- (.*$)/gim, '<li class="ml-4 mb-1">• $1</li>')
                .replace(/^\d+\. (.*$)/gim, '<li class="ml-4 mb-1 list-decimal">$1</li>')
                .replace(/\n/g, '<br>')
                .replace(/(<li.*?>.*?<\/li>)/g, '<div class="my-2">$1</div>');
        }

        // Update blog preview with progressive loading
        async function updateBlogPreview(content, useProgressive = false) {
            document.getElementById('selectedTemplate').textContent = 
                currentTemplate.charAt(0).toUpperCase() + currentTemplate.slice(1);
            
            if (useProgressive) {
                await displayContentProgressively(content);
            } else {
                const formattedContent = formatMarkdownToHTML(content);
                blogContent.innerHTML = formattedContent;
            }
        }

        // Template selection with caching and loading states
        document.addEventListener('click', async (e) => {
            if (e.target.closest('.template-btn')) {
                const templateBtn = e.target.closest('.template-btn');
                const template = templateBtn.dataset.template;
                
                // Don't do anything if the same template is clicked or if we're already generating
                if (template === currentTemplate || isGenerating) return;
                
                // Only proceed if we have video data
                if (!currentVideoData) return;
                
                // Update visual feedback immediately
                updateTemplateSelection(templateBtn, template);
                
                // Check if we have cached content for this template
                if (templateCache[template]) {
                    console.log(`📋 Using cached content for ${template} template`);
                    currentTemplate = template;
                    currentBlogContent = templateCache[template];
                    await updateBlogPreview(currentBlogContent, false);
                    
                    // Track template switch from cache
                    trackEvent('template_switched', {
                        template: template,
                        from_cache: true
                    });
                    
                    return;
                }
                
                // Generate new content
                await generateTemplateContent(template);
            }
        });

        function updateTemplateSelection(selectedBtn, template) {
            // Update visual state
            document.querySelectorAll('.template-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-100');
                btn.classList.add('border-gray-200', 'bg-gray-50');
            });
            
            selectedBtn.classList.remove('border-gray-200', 'bg-gray-50');
            selectedBtn.classList.add('border-blue-500', 'bg-blue-100');
            
            // Update template name immediately
            document.getElementById('selectedTemplate').textContent = 
                template.charAt(0).toUpperCase() + template.slice(1);
        }

        async function generateTemplateContent(template) {
            if (isGenerating) return;
            
            try {
                isGenerating = true;
                console.log(`🔄 Generating new content for ${template} template`);
                
                // Show loading indicators
                templateLoadingIndicator.classList.remove('hidden');
                
                // Show specific template loading indicator
                const templateBtn = document.querySelector(`[data-template="${template}"]`);
                const templateLoader = templateBtn.querySelector('.template-loader');
                templateLoader.classList.remove('hidden');
                
                // Disable all template buttons during generation
                document.querySelectorAll('.template-btn').forEach(btn => {
                    btn.style.pointerEvents = 'none';
                    btn.style.opacity = '0.6';
                });
                
                // Make API request
                const blogResponse = await fetch(`${API_BASE_URL}/api/generate-blog`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ 
                        url: urlInput.value, 
                        template: template 
                    })
                });
                
                if (!blogResponse.ok) {
                    throw new Error(`API responded with status ${blogResponse.status}`);
                }
                
                const blogData = await blogResponse.json();
                
                // Update state
                currentTemplate = template;
                currentBlogContent = blogData.content;
                templateCache[template] = blogData.content;
                
                // Hide loading indicators
                templateLoadingIndicator.classList.add('hidden');
                const currentTemplateBtn = document.querySelector(`[data-template="${template}"]`);
                const currentTemplateLoader = currentTemplateBtn.querySelector('.template-loader');
                currentTemplateLoader.classList.add('hidden');
                
                // Show new content with progressive loading
                await updateBlogPreview(currentBlogContent, true);
                
                // Show feedback prompt after template generation
                setTimeout(() => {
                    const feedbackPrompt = document.getElementById('feedbackPrompt');
                    if (feedbackPrompt) {
                        feedbackPrompt.classList.remove('hidden');
                        feedbackPrompt.style.animation = 'slideIn 0.5s ease-out';
                    }
                }, 1500);
                
                console.log(`✅ Successfully generated ${template} template content`);
                
                // Track template generation success
                trackEvent('template_switched', {
                    template: template,
                    from_cache: false,
                    content_length: currentBlogContent.length
                });
                
            } catch (error) {
                // Track template generation error
                trackError(error, `template_generation_${template}`);
                console.error('Error generating template content:', error);
                
                // Hide loading indicators
                templateLoadingIndicator.classList.add('hidden');
                const errorTemplateBtn = document.querySelector(`[data-template="${template}"]`);
                const errorTemplateLoader = errorTemplateBtn.querySelector('.template-loader');
                errorTemplateLoader.classList.add('hidden');
                
                // Show error message
                blogContent.innerHTML = `
                    <div class="text-red-600 bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="alert-circle" class="h-5 w-5"></i>
                            <span class="font-medium">Error generating content</span>
                        </div>
                        <p class="mt-2 text-sm">${error.message}</p>
                        <button onclick="generateTemplateContent('${template}')" class="mt-3 text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded transition-colors">
                            Try Again
                        </button>
                    </div>
                `;
                lucide.createIcons();
                
            } finally {
                isGenerating = false;
                
                // Hide all template loaders
                document.querySelectorAll('.template-loader').forEach(loader => {
                    loader.classList.add('hidden');
                });
                
                // Re-enable template buttons
                document.querySelectorAll('.template-btn').forEach(btn => {
                    btn.style.pointerEvents = 'auto';
                    btn.style.opacity = '1';
                });
            }
        }

        // Copy functionality
        document.getElementById('copyBtn').addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(currentBlogContent);
                const copyBtn = document.getElementById('copyBtn');
                const originalHTML = copyBtn.innerHTML;
                
                copyBtn.innerHTML = '<i data-lucide="check-circle-2" class="h-4 w-4 mr-2"></i>Copied!';
                copyBtn.className = 'inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700 border border-green-200';
                
                lucide.createIcons();
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalHTML;
                    copyBtn.className = 'inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium bg-blue-100 text-blue-700 border border-blue-200 hover:bg-blue-200 transition-all duration-200';
                    lucide.createIcons();
                }, 2000);
                
            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
        });

        // Download functionality
        document.getElementById('downloadBtn').addEventListener('click', () => {
            const blob = new Blob([currentBlogContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `blog-${currentTemplate}-${Date.now()}.md`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // Feedback functions
        function hideFeedbackPrompt() {
            const feedbackPrompt = document.getElementById('feedbackPrompt');
            feedbackPrompt.style.animation = 'slideOut 0.3s ease-in';
            setTimeout(() => {
                feedbackPrompt.style.display = 'none';
            }, 300);
            
            // Track feedback prompt dismissal
            trackEvent('feedback_prompt_dismissed', {
                template: currentTemplate,
                timestamp: new Date().toISOString()
            });
        }

        // Track feedback link clicks
        document.addEventListener('click', (e) => {
            if (e.target.closest('a[href*="kartikag119@gmail.com"]')) {
                trackEvent('feedback_clicked', {
                    source: e.target.closest('#feedbackPrompt') ? 'prompt' : 
                           e.target.closest('.fixed') ? 'floating_button' : 'footer',
                    template: currentTemplate,
                    timestamp: new Date().toISOString()
                });
            }
        });

        // Initialize validation state
        updateValidation(null);

        // Ensure all icons are rendered after page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        });
    </script>
  </body>
</html>
